#!/bin/bash
# Git commit-msg hook
# Validates commit message format
#
# This file is managed in templates/common/.githooks/
# Install using: ./.claude/scripts/install-hooks.sh

COMMIT_MSG_FILE=$1
COMMIT_MSG=$(cat "$COMMIT_MSG_FILE")

# Color codes
RED='\033[0;31m'
YELLOW='\033[1;33m'
NC='\033[0m'

# Skip merge commits
if grep -q "^Merge " "$COMMIT_MSG_FILE"; then
    exit 0
fi

# Basic validation: minimum length
if [ ${#COMMIT_MSG} -lt 10 ]; then
    echo -e "${RED}Error: Commit message too short (minimum 10 characters)${NC}"
    exit 1
fi

# Optional: Conventional Commits format check
# Uncomment to enforce conventional commits (feat:, fix:, docs:, etc.)
# if ! echo "$COMMIT_MSG" | grep -qE "^(feat|fix|docs|style|refactor|test|chore|perf|ci|build|revert)(\(.+\))?: .+"; then
#     echo -e "${YELLOW}Warning: Consider using Conventional Commits format${NC}"
#     echo "Examples: feat: add feature, fix: resolve bug"
# fi

exit 0
